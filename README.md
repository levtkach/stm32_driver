# STM32 Programmer

Программа для прошивки микроконтроллеров STM32 через ST-Link программатор.

## Возможности

- Прошивка плат STM32 через ST-Link
- Поддержка методов: pystlink, OpenOCD, STM32CubeProgrammer
- GUI и CLI интерфейсы
- **Веб-интерфейс для доступа по локальной сети**
- Автоматическое тестирование после прошивки
- Работа с UART для управления режимами

## Установка

```bash
pip install -r requirements.txt
```

## Использование

### Веб-сервер (доступ в локальной сети)

Запустите веб-сервер для доступа через браузер:

```bash
python main_server.py
```

По умолчанию сервер использует порт 8080. Вы можете изменить порт:

```bash
# Через аргумент командной строки
python main_server.py --port 5001

# Или через переменную окружения
PORT=5001 python main_server.py
```

После запуска сервер будет доступен:
- Локально: `http://127.0.0.1:<ПОРТ>`
- В локальной сети: `http://<IP_АДРЕС_КОМПЬЮТЕРА>:<ПОРТ>`

Если указанный порт занят, сервер автоматически найдет свободный порт.

Веб-интерфейс позволяет:
- Выбирать ST-Link устройства и COM порты
- Загружать файлы прошивки (LV и HV)
- Запускать и отслеживать процесс программирования
- Просматривать прогресс в реальном времени

### GUI (локальный интерфейс)

```bash
python main_gui.py
```

### CLI (командная строка)

```bash
python main_cli.py
```

## REST API

Веб-сервер предоставляет REST API для программного доступа:

- `GET /api/devices` - список доступных ST-Link устройств
- `GET /api/ports` - список доступных COM портов
- `GET /api/firmware/list` - список файлов прошивки
- `POST /api/program/start` - запуск программирования
- `POST /api/program/stop` - остановка программирования
- `GET /api/program/status` - статус программирования
- `POST /api/program/reset` - сброс состояния
- `GET /api/health` - проверка работоспособности

## Требования

- Python 3.6+
- ST-Link программатор
- STM32 микроконтроллер
